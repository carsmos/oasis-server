### logbook from Fang

#### Old thought


1. 如果不将车看作聚合，可以做，但是整体很低内聚，逻辑松散会偏向数据库驱动，可以先考虑以车为聚合. 如果sensor无法不归属于某车而独立存在，则车应该为聚合
2. 如果将车看作聚合，车辆表的创建后是否需要同时创建传感器表，动力学表等数据库表。
3. 生成车后，是否还支持在传感器，动力学等页面额外添件？
4. 应该将车看做聚合会更清晰，聚合内包括了车辆的附属模块，可完整创建一辆车，或是不完整创建，比如没有传感器。
修改附属模块如传感器时也应该遵循以车为aggregate来修改，调用的也应该是车为聚合根的repo下的修改方法，如 add 传感器
但是如果所有配置都在一个表中，如何呈现一个传感器库供某车选择。多表则会回到想法2中，需要在建车辆表的同时创建其他表，分表创建
如果可以满足transaction是OK的，
5. sensor也确实有可能为独立aggregate root，如果要脱离汽车考虑，并且需要独立编辑和保存，作为库来使用
6. 如果car为总聚合根，增加修改是直接生效的，无法选择传感器，但可以通过enable方式定义传感器是否使用。

   
#### New perspective


测试车辆部分目前构思后端的两种实现：

 1。 车为独立聚合根，document中包含所有完整车辆配置信息，包括车辆模型，动力学，轮胎，传感器，自动驾驶系统的参数，一辆车是一个完整大document，
     无外键依赖，所有信息在车辆被定义保存后，完整信息全部来自各模块配置的snapshot。车辆列表外，其他模块，包括传感器，动力学，轮胎全部
     以库的形式存在，都是独立聚合根。整车配置应该顺应直觉操作从新建车辆出发，加入配置信息如传感器时可先入库然后选择，选择时是直接使用
     库中传感器snapshot，所以在整车装配完整后，库内传感器参数的调整不会影响车辆内传感器参数。（自由度高）

 2。 车为所有配置的总聚合根 包括原型图中的车辆模型，动力学，轮胎，传感器，自动驾驶系统模块调整全部依赖车辆中的配置，增加修改是直接生效的，
     无法从列表中选择某几个传感器，只能通过enable开关此类方式配置。传感器等配置是严格绑定在车上的。 （自由度低）
